
Readme for Oscar on IA64 with RedHat 3AS and Intel SR870BH2

Date: Mon 2004/07/19
Author: Yves Trudeau <yves.trudeau@revolutionlinux.com>

1. i386 RPM

In order to use some i386 binaries like tftp-hpa with the emulator, we must
modify the /usr/lib/rpm/rpmrc file. Change the entry:

arch_compat: ia64: noarch

to:

arch_compat: ia64: i386 noarch

2. Initrd

There is a problem generating a valid initrd files on the nodes, so we must 
provides one in the image.  After the client image is generated by the oscar 
wizard (step 4), simply copy a valid initrd in the /boot/efi/efi/redhat:

cp /boot/efi/efi/redhat/initrd-2.4.21-15.EL.img /var/lib/systemimager/images/oscarimage/boot/efi/EFI/redhat/

You will also need to add an INITRD entry to the image 
/etc/systemconfig/systemconfig.conf file. After the modification, the kernel 
section should look like this:

[KERNEL0]
        PATH = /boot/efi/EFI/redhat/vmlinuz-2.4.21-15.EL
        INITRD = /boot/efi/EFI/redhat/initrd-2.4.21-15.EL.img
        LABEL = 2.4.21-15.EL

3. SCSI and network

Edit the file 
/var/lib/systemimager/images/oscarimage2/etc/systemconfig/systemconfig.conf
and add an Hardware section with scsi and network drivers. For the SR870BH2,
the hardware section of this file will look like this:

[HARDWARE]
        ORDER = e1000 e1000 mptscsih mptbase scsi_mod

4. USB

If you need to use the keyboard on a usb only system like the Intel SR870BH2, 
you need to add the usb controller to /etc/modules.conf of the oscar image.  
In our image, /etc/modules.conf cat like this:

[root@rh3as2 etc]# cat modules.conf
alias usb-controller usb-uhci
