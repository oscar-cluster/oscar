#!/usr/bin/perl

# gen_c3_conf - script to generate the /etc/c3.conf file from the ORNL
#               cluster definition file
# Author: Brian Leuthke
# Last Updated: 10/10/2000

use strict;
use Carp;
use lib '/usr/lib/systeminstaller';
use SystemInstaller::Machine;
use Data::Dumper;

my $image = shift;

my $c3_conf = "/etc/c3.conf";

my %hash = get_machine_listing($image);

open(OUT,">$c3_conf") or croak("Couldn't open $c3_conf");
foreach my $key (sort keys %hash) {
    print OUT $hash{$key}->{HOST}, "\n";
}
close(OUT);

