% -*- latex -*-
%
% $Id: install.tex,v 1.6 2002/08/31 16:32:11 jsquyres Exp $
%
% $COPYRIGHT$
%

\subsection{Packet Filtering with pfilter}
\label{app:pfilter-overview}

{\bf pfilter} is a firewall compiler.  The {\bf pfilter} package is
used to control the packet filtering capabilities available in the
Linux kernel.  It takes in high-level firewall directives, and
produces a complete firewall output commands file that can be turned
on or off like other Linux services.  Like other compilers, {\bf
  pfilter} adds appropriate ``glue'' code to the compiled output.
{\bf pfilter}'s added ``glue'' code consists of common things that are
done by any good firewall, including turning on TCP networking
protective features.

When OSCAR was installed, it modified the {\bf pfilter} installation
by merging any pre-existing {\bf pfilter} configuration file and some
new cluster specific commands.  The new configuration file is common
to all machines in the cluster, using the conditional expression
capabilities of {\bf pfilter} to allow different types of cluster
machines to have different packet filtering attributes.  
Here are some of the things that OSCAR adds
to the {\bf pfilter} configuration file:

\begin{itemize}
\item the default for network interfaces is set to be untrusted
\item the syslog logging of bad network packets is turned off
\item the main OSCAR server node has \cmd{ssh} logins enabled
\item the main OSCAR server node has http access enabled
\item all communication between nodes in the cluster is enabled
\end{itemize}

\begin{discuss}
  Is this all still true?  I think we enable multicasting in the
  cluster, don't we?  Does this need to be listed?
\end{discuss}

{\bf pfilter} is turned on by default -- this is considered good
``defense in depth'' security for a cluster (see
Section~\ref{app:security} for more information on cluster security).
If for some reason you need to disable {\bf pfilter} packet filtering
(perhaps for debugging -- disabling it permanently is not recomended),
you can disable {\bf pfilter} subsequent system boots with the
following command:

\begin{verbatim}
  # chkconfig --level=2345 pfilter on
\end{verbatim}

To turn on {\bf pfilter} packet filtering immediately, execute the
following command:

\begin{verbatim}
  # service pfilter start
\end{verbatim}

For more information on how to use and configure {\bf pfilter}, see
the \cmd{pfilter(8)} and \file{pfilter.conf(5)} and
\file{pfilter.rulesets(5)} man pages. 
