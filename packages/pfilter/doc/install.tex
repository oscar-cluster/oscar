% -*- latex -*-
%
% $Id: install.tex,v 1.3 2002/06/20 05:08:38 jsquyres Exp $
%
% $COPYRIGHT$
%

\subsection{Packet Filtering with pfilter}
\label{app:pfilter-overview}

{\bf pfilter} is a firewall compiler.  The {\bf pfilter} package is
used control the packet filtering capabilities available in the Linux
kernel.  It takes in high level firewall directives, and produces a
complete firewall output commands file, that can be turned on or off
like other GNU/Linux services.  Like other compilers, {\bf pfilter}
adds appropriate ``glue'' code to the compiled output.  In the case of
{\bf pfilter}, the added ``glue'' code consists of common things that
are done by any good firewall, including turning on TCP networking
protective features.

When OSCAR was installed, it modified the {\bf pfilter} installation
by merging any pre-existing {\bf pfilter} configuration file and some
new cluster specific commands.  The new configuration file is common
to all machines in the cluster, using conditional expression
capabilities of {\bf pfilter} to allow different types of cluster
machines to have different packet filtering attributes.  OSCAR adds
these things to the {\bf pfilter} configuration file:

\begin{itemize}
\item the default for network interfaces as set to be untrusted
\item bad packet syslog logging is turned off
\item the main OSCAR server machine has ssh logins enabled
\item the main OSCAR server machine has http access enabled
\item all communication between nodes in the cluster is enabled
\end{itemize}

{\bf pfilter} is turned off by default. To enable {\bf pfilter} packet
filtering on subsequent system boots, execute the following command:

\begin{verbatim}
  # chkconfig --level=2345 pfilter on
\end{verbatim}

To turn on {\bf pfilter} packet filtering immediately, execute the
following command:

\begin{verbatim}
  # service pfilter start
\end{verbatim}

For more information on how to use and configure {\bf pfilter}, see
the \cmd{pfilter(8)} and \file{pfilter.conf(5)} and
\file{pfilter.rulesets(5)} man pages.

