<?xml version="1.0" encoding="ISO-8859-1"?>

<oscar 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:oscar-config="http://sf.net/oscar/2005/config.xml"
  xsi:schemaLocation="http://sf.net/oscar/2005/config.xml oscar-config.xsd"
>

  <!--
  =====================================================
  =====================================================
  ==                                                 ==
  ==    oda data for oda record in packages table    ==
  ==                                                 ==
  =====================================================
  =====================================================
  -->

  <!--
      Copyright (c) 2004 NCSA 
                         All rights reserved.
      Copyright (c) 2005 The Trustees of Indiana University.  
                         All rights reserved.
      
      This file is part of the OSCAR software package.  For license
      information, see the COPYING file in the top level directory of the
      OSCAR source distribution.
     
      $Id: config.xml,v 1.82 2004/05/04 22:54:31 ngorsuch Exp $
  -->
  <name>ODA</name>

  <version>
    <major>1</major>
    <minor>31</minor>
    <subversion>0</subversion>
    <release>1</release>
    <epoch>1</epoch>
  </version>

  <class>core</class>

  <summary>Oscar DAtabase</summary>
  <license>Freely distributable</license>
  <group>Application/Environment</group>

  <packager>
    <name>Neil Gorsuch</name>
    <email>ngorsuch@ncsa.uiuc.edu</email>
  </packager>

  <maintainer>
    <name>DongInn Kim</name>
    <email>dikim@osl.iu.edu</email>
  </maintainer>

  <description>ODA provides a central database for OSCAR.</description>

  <!-- the binary packages are installed as prereqs. not needed here any more
  <binary-package-list>
    <filter>
      <distribution>
        <name>redhat</name>
      </distribution>
    </filter>

    <pkg>mysql</pkg>
    <pkg>perl-DBD-MySQL</pkg>
    <pkg>perl-DBI</pkg>
  </binary-package-list>

  <binary-package-list>
    <filter>
      <distribution>
        <name>mandrake</name>
      </distribution>
    </filter>

    <pkg>MySQL</pkg>
    <pkg>MySQL-client</pkg>
    <pkg>libmysql12</pkg>
    <pkg>perl-CGI</pkg>
    <pkg>perl-DBI</pkg>
    <pkg>perl-Mysql</pkg>
    <pkg>perl-Data-ShowTable</pkg>
    <pkg>MySQL-common</pkg>
  </binary-package-list>

  -->
  


  <!--
  ==================================================
  ==================================================
  ==                                              ==
  ==    definitions of global database tables     ==
  ==                                              ==
  ==================================================
  ==================================================
   -->

  <database_tables>

    <Clusters>
        <fields>
            <id>
                <type> integer </type>
                <parameters> auto_increment not null unique primary key </parameters>
            </id>
            <name>
                <parameters> not null unique </parameters>
            </name>
            <parent_id>
                <type> integer </type>
                <default> 0 </default>
            </parent_id>
            <oscar_version/>
            <server_distribution/>
            <server_distribution_version/>
            <server_architecture/>
            <installation_date>
                <type> date </type>
            </installation_date>
            <headnode_interface/>
        </fields>
    </Clusters>

    <Groups>
        <fields>
            <id>
                <type> integer </type>
                <parameters> auto_increment not null unique primary key </parameters>
            </id>
            <name>
                <parameters> not null unique </parameters>
            </name>
            <selected>
                <type> integer </type>
                <default> 0 </default>
            </selected>
        </fields>
    </Groups>

    <Images>
        <fields>
            <id>
                <type> integer </type>
                <parameters> auto_increment not null unique primary key </parameters>
            </id>
            <name>
                <parameters> not null unique </parameters>
            </name>
            <path/>
            <distro/>
            <architecture/>
        </fields>
    </Images>

    <Networks>
        <fields>
            <n_id>
                <type> integer </type>
                <parameters> auto_increment not null unique primary key </parameters>
            </n_id>
            <name/>
            <cluster_id>
                <type> integer </type>
            </cluster_id>
            <base_ip/>
            <high_ip/>
            <broadcast/>
            <netmask/>
            <rfc1918/>
            <gateway/>
        </fields>
    </Networks>

    <Nics>
        <fields>
            <id>
                <type> integer </type>
                <parameters> auto_increment not null unique primary key </parameters>
            </id>
            <name/>
            <ip/>
            <mac>
                <parameters> not null </parameters>
            </mac>
            <node_id>
                <type> integer </type>
            </node_id>
            <network_id>
                <type> integer </type>
            </network_id>
        </fields>
    </Nics>

    <Nodes>
        <parameters> unique(name,dns_domain) </parameters>
        <fields>
            <id>
                <type> integer </type>
                <parameters> auto_increment not null unique primary key </parameters>
            </id>
            <name/>
            <hostname/>
            <dns_domain/>
            <fqdn/>
            <cluster_id>
                <type> integer </type>
            </cluster_id>
            <image_id>
                <type> integer </type>
            </image_id>
            <virtual/>
            <group_id>
                <type> integer </type>
            </group_id>
            <swap/>
            <cpu_speed/>
            <cpu_num>
                <type> integer </type>
            </cpu_num>
            <ram/>
            <units/>
            <installer/>
        </fields>
    </Nodes>

    <Packages>
        <fields>
            <id>
                <type> integer </type>
                <parameters> auto_increment not null unique primary key </parameters>
            </id>
            <package>
              <parameters> not null unique </parameters>
            </package>
            <name/>
            <group/>
            <class/>
            <version>
              <type> varchar(250) </type>
              <parameters> not null </parameters>
            </version>
            <version_major> 
              <type> integer </type>
            </version_major>
            <version_minor> 
              <type> integer </type>
            </version_minor>
            <version_release/>
            <version_subversion/>
            <version_epoch/>
            <maintainer_email/>
            <maintainer_name/>
            <packager_email/>
            <packager_name/>
            <summary/>
            <url/>
            <vendor/>
            <path/>
            <copyright/>
            <license/>
            <description>
                <type> text </type>
            </description>
        </fields>
    </Packages>
    
    <Status>
        <fields>
            <id>
                <type> integer </type>
                <parameters> auto_increment not null unique </parameters>
            </id>
            <name>
                <parameters> not null unique primary key</parameters>
            </name>
        </fields>
    </Status>

    <Node_Packages>
        <parameters> unique(node_id,package_id) </parameters>
        <fields>
            <node_id>
                <type> integer </type>
            </node_id>
            <package_id>
                <type> integer </type>
            </package_id>
        </fields>
    </Node_Packages>

    <Image_Packages>
        <parameters> unique(image_id,package_id) </parameters>
        <fields>
            <image_id>
                <type> integer </type>
            </image_id>
            <package_id>
                <type> integer </type>
            </package_id>
        </fields>
    </Image_Packages>

    <Group_Nodes>
        <parameters> unique(group_name,node_id) </parameters>
        <fields>
            <group_name/>
            <node_id>
                <type> integer </type>
            </node_id>
        </fields>
    </Group_Nodes>

    <Group_Packages>
        <parameters> unique(group_name,package_id) </parameters>
        <fields>
            <group_name/>
            <package_id>
                <type> integer </type>
            </package_id>    
            <selected>
                <type> integer </type>
                <default> 0 </default>
            </selected>
        </fields>
    </Group_Packages>

    <Node_Package_Status>
        <parameters> unique(node_id,package_id) </parameters>
        <fields>
            <node_id>
                <type> integer </type>
            </node_id>
            <package_id>
                <type> integer </type>
            </package_id>    
            <requested>
                <type> integer </type>
            </requested>    
            <current>
                <type> integer </type>
            </current>    
            <status>
                <type> integer </type>
            </status>
            <error>
                <type> text </type>
            </error>
        </fields>
    </Node_Package_Status>

    <Packages_conflicts>
        <parameters> unique(p1_id,p2_name) </parameters>
        <fields>
            <p1_id>
                <type> integer </type>
            </p1_id>    
            <type/>
            <p2_name/>
        </fields>
    </Packages_conflicts>

    <Packages_provides>
        <parameters> unique(p1_id,p2_name) </parameters>
        <fields>
            <p1_id>
                <type> integer </type>
            </p1_id>    
            <type/>
            <p2_name/>
        </fields>
    </Packages_provides>

    <Packages_requires>
        <parameters> unique(p1_id,p2_name) </parameters>
        <fields>
            <p1_id>
                <type> integer </type>
            </p1_id>    
            <type/>
            <p2_name/>
        </fields>
    </Packages_requires>

    <Packages_rpmlists>
        <fields>
            <package_id>
                <type> integer </type>
            </package_id>    
            <rpm/>
            <distro/>
            <distro_version/>
            <group_name/>
            <group_arch/>
        </fields>
    </Packages_rpmlists>

    <Packages_switcher>
        <fields>
            <package_id>
                <type> integer </type>
            </package_id>    
            <switcher_name/>
            <switcher_tag/>
        </fields>
    </Packages_switcher>

    <Packages_servicelists>
        <parameters> unique(package_id,service) </parameters>
        <fields>
            <package_id>
                <type> integer </type>
            </package_id>    
            <group_name/>
            <service/>
        </fields>
    </Packages_servicelists>

    <OscarFileServer>
        <fields>
            <oscar_httpd_server_url/>
            <oscar_httpd_pkg_files/>
            <oscar_httpd_pkg_cache/>
        </fields>
    </OscarFileServer>

  </database_tables>
</oscar>
