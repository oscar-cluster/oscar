% -*- latex -*-
%
% Copyright (c) 2002 The Trustees of Indiana University.  
%                    All rights reserved.
% 
% This file is part of the OSCAR software package.  For license
% information, see the COPYING file in the top level directory of the
% OSCAR source distribution.
%
% $Id: no_dhcp.tex,v 1.3 2002/11/17 04:02:39 jsquyres Exp $
%
% $COPYRIGHT$
%

\section{Installing without a DHCP server}
\label{app:no_dhcp}

This section provides information on installing OSCAR without the use
of a DHCP server on the server node.  For most people, this
information is not applicable.  In addition, this section only
presents information where the installation differs from the standard
OSCAR install - information presented elsewhere in this document is
applicable unless stated otherwise.

Please note that installing an OSCAR cluster with these instructions
is not generally supported by the OSCAR developers.  While at least
one group in the OSCAR team regularly installs and maintains a
cluster configured as described here, that doesn't mean it will work
in every release.  In other words, continue at your own risk.

\subsection{Boot Floppies}

PXE boot and installation only works correctly if the server running
the tftpboot server is also running the DHCP server.  As this is
obviously not the case if the OSCAR server node can not run a DHCP
server, client nodes must be installed using a boot floppy.  Further,
the boot floppies created with the ``Make Boot Floppy'' option in the
OSCAR wizard assumes there is a DHCP server running on the server
node, so we must use a special boot floppy.

Unfortunately, we have to make a boot floppy for every node (since the
boot floppy will have IP information encoded in it)\footnote{This
  process can obviously be automated, but we do not go into detail on
  that process here.}.  First, a configuration file that provides SIS
with the needed boot information must be created.  The sample below is
used to create a machine {\tt thumb1.osl.iu.edu}.  The fields are
self-explanatory.  The {\tt IMAGESERVER} should be set to the IP
address of the OSCAR server node (where you are running the OSCAR
wizard).  The other networking information must match the information
given when building client image during the installation, otherwise
your system might not be installable.

\begin{verbatim}
HOSTNAME=thumb1
DOMAINNAME=osl.iu.edu
DEVICE=eth0
IPADDR=129.79.247.11
NETMASK=255.255.252.0
NETWORK=129.79.244.0
BROADCAST=129.79.247.255
GATEWAY=129.79.247.254
IMAGESERVER=129.79.247.10
\end{verbatim}

The boot floppy can be created by running {\tt mkautoinstalldiskette}
with the {\tt -config FILE} option specifying the location of the
configuration file created above.

\subsection{Differences from Standard OSCAR Install}

\subsubsection{Cluster Definition}

When setting up the networking in the OSCAR installation wizard, it is
not necessary to collect the MAC addresses of your client nodes.
However, to make sure all the proper steps of the OSCAR installation
are performed, you should ensure that you open the Wizard pane and
click on the ``Done'' option.

\subsubsection{Adding and Deleting client nodes}

The Add / Delete client node functionality has not been well tested in
this configuration.  While there should not be any problems in adding
a node to the cluster using boot floppies~\footnote{Just remember to
create another boot floppy}, please be cautious when adding a new node
to the cluster.
