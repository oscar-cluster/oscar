% -*- latex -*-
%
% Copyright (c) 2002 The Trustees of Indiana University.  
%                    All rights reserved.
% 
% This file is part of the OSCAR software package.  For license
% information, see the COPYING file in the top level directory of the
% OSCAR source distribution.
%
% $Id: release-notes.tex,v 1.39 2003/08/19 22:29:50 naughtont Exp $
%

\section{Release Notes}
\label{sec:release-notes}

The following release notes apply to OSCAR version \oscarversion.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Notes for All Systems}
\label{subsec:release-notes}

\begin{itemize}
\item Each package in OSCAR has its own installation and release
  notes.  \detailed{See Section~\ref{sec:pkg-specific-notes} for
    additional release notes.} \quick{See the full Installation Guide
    for these notes.}

\item All nodes must have a hostname other than ``{\tt localhost}''
  that does not contain any underscores (``{\tt \_}'').
  
\item A domain name must be specified for the client nodes when
  defining them.

%TJN: KEEP THIS (if we keep the python2-compat rpms under c3?)
\item Due to some distribution portability issues, OSCAR currently installs
  a ``compatibility'' (\file{python2-compat-1.0-1}) RPM to resolve the
  Python2 prerequisite that is slightly different across different Linux
  distributions.  Also see the file \file{packages/c3/RPMS/NOTE.python2}.

%TJN: CUT THIS?
% \item The current version of C3 that is shipped with OSCAR requires
%   Python 2.x.  The Python 2.x RPMs that are provided in OSCAR are
%   re-built to work on RedHat 7.1 as well as RedHat 7.2.  However,
%   RedHat 7.2 ships with Python 2.x, so measures were taken such that
%   the OSCAR-shipped Python 2.x RPM will not be installed over the
%   default RedHat 7.x RPM (specifically, the RPM release number has
%   been decremented).  Due to some distribution portability issues,
%   OSCAR currently installs a ``compatibility''
%   (\file{python2-compat-1.0-1}) RPM to resolve the Python2
%   prerequisite that is slightly different across different Linux
%   distributions.  Also see the file
%   \file{packages/c3/RPMS/NOTE.python2}.

\item In some cases, the test window that is opened from the 
  OSCAR wizard may close suddenly when there is a test failure. If
  this happens, run the test script, \file{testing/test\_cluster},
  manually in a shell window to diagnose the problem.
 
\item Although OSCAR can be installed on pre-existing server nodes, it
  is typically easiest to use a machine that has a new, fresh install
\begchange
  of a distribution listed in Table~\ref{tab:oscar-distro-support}
  {\em with no updates installed}.  If the updates are installed,
  there may be conflicts in RPM requirements.  It is recommended to
  install RedHat updates {\em after} the initial OSCAR installation has
  completed.  On the Mandrake systems the security updates must be added
  prior to the install.
\endchange
  
\item The following benign warning message will appear multiple times
  during the OSCAR installation process:

\begin{verbatim}
  rsync_stub_dir: no such variable at ...
\end{verbatim}

  It is safe to ignore these messages.
  
\item The OSCAR installer will install the MySQL package on the server
  node if it is not already installed.  You will be prompted to enter a
  password to used for the MySQL database.
  
\item The OSCAR installer GUI provides little protection for user
  mistakes.  If the user executes steps out of order, or provides
  erroneous input, Bad Things may happen.  Users are strongly
  encouraged to closely follow the instructions provided in this
  document.

\item The OSCAR installer GUI currently does not support deleting a
  node and adding the same node back {\em in the same session}.  If
  you wish to delete a node and then add it back, you must delete the
  node, close the OSCAR installer GUI, launch the OSCAR installer GUI
  again, and then add the node.

\item During the \button{Build OSCAR Client Image} step, the ``Successfully
  created image'' notice will appear even though the status bar looks
  incomplete.  This incomplete status bar can be ignored.

\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Red Hat 9.0/8.0 Notes}
\label{subsec:rh90notes}

There are a few issues that may crop up when using OSCAR on Red Hat 9.0
and/or Red Hat 8.0 clusters.  The following items highlight these
issues.  

\begin{itemize}

\item Deselecting Pfilter causes the image creation to fail.  This is
  due to a dependency with IPtables and when Pfilter is not selected
  the IPtables RPM is not listed in the node (image) rpmlist.   The simple
  fix is to add ``iptables'' to the Red Hat 9.0 rpmlist if you are not
  installing Pfilter on the compute nodes.

\item The RPM system has been updated with this Red Hat release.  The
 OSCAR install process will likely display several warnings due to unsigned
 RPMS.  These warnings can be ignored. 

%TJN: These are the notes Jeff posted for the "Re: mksiimage hang problems"
%  thread on oscar-devel (2003-07-23)
\item In some tests, RPM would hang during the building of a client image
(Section~\ref{det:build-client-image}).  The procedure that was used to
remedy this situation is outlined below (excerpts taken from
\url{http://www.rpm.org/hintskinks/repairdb-2003-06/}):
	\begin{itemize}
		\item If RPM hangs at any point (e.g., building the client image)
		-- first ensure that it really has hung, and just isn't taking a
		long, long time to complete.  Typically indications that it has
		genuinely hung include: disk is not running; load has gone
		down to 0.00 and stays there.

		\item Then do a \cmd{ps} and find the PID of the \cmd{rpm} process: 
			\begin{verbatim}
				# ps -eadf | grep rpm | grep -v grep
				 ...output...
				# kill <PID_of_RPM>
			\end{verbatim}

		\item This will probably not kill the process (it's likely to be in
		a state where it is ignoring signals), but it should be tried
		anyway -- this would allow \cmd{rpm} to exit cleanly.  If \cmd{rpm} 
		does  exit cleanly, jump down to the last step in this procedure.

		\item If \cmd{rpm} does not exit within a short period of time,
		\cmd{kill -9 <PID\_of\_RPM>}.  This guarantees that \cmd{rpm} will
		not exit cleanly, but in this case, it's ok.  Now, do the
		following:
			\begin{enumerate}
				\item Save a copy of the RPM database (just to be safe):
					\begin{verbatim}
						# cd /var/lib
						# tar zcvf /tmp/rpmdb.tar.gz rpm
					\end{verbatim}

				\item Delete any existing RPM database locks:
					\begin{verbatim}
						# cd /var/lib/rpm
						# rm -f __db*
					\end{verbatim}

				\item Rebuild the RPM database:
					\begin{verbatim}
						# rpm -vv --rebuilddb
					\end{verbatim}
			\end{enumerate}

		\item Now re-run the OSCAR step that hung.  If RPM hangs again,
		repeat these steps to un-hang it.
	\end{itemize}

\end{itemize}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Mandrake 9.0 Notes}
\label{subsec:mdk90notes}

The following may need to be run before attempting to install OSCAR on a
Mandrake 9.0 cluster.  If there are problems during the server preparation
related to C3 or Python2 this may solve the issue.

\begin{itemize}
\item Install the Python 2 compatibility RPM.  This RPM can be found
  in the OSCAR distribution package, under the \file{packages/c3/RPMS}
  directory:

\begin{verbatim}
  # cd oscar-2.3/packages/c3/RPMS
  # rpm -Uvh python2-compat-1.0-1.noarch.rpm
\end{verbatim}

% (ORIGINALLY in the 8.2 notes)
% TJN: Doc fix for BUG#686916 'xterm needed by SIS'
%      Remove after 2.3 when add to server_prep/pre-req check areas.
%     - on RH7.x systems the xterm binaray is packaged w/ XFree86 (big bundle)
%     - on MDK8.x it showed up in it's own xterm rpm.
\item The OSCAR wizard makes use of \cmd{xterm} so this package must be
  installed.  You can check the RPM database for this package by typing
  \cmd{rpm -q xterm}.  If \cmd{xterm} is not available, you must
  install the \file{xterm-165-3mdk.i586.rpm} RPM (you may need Mandrake 
  CD's to run the \cmd{urpmi} command as mentioned above):

\begin{verbatim}
  # urpmi xterm
\end{verbatim}

% TJN: relates to server_prep: unmunge_pathenv()
\item Lastly, \user{root}'s default shell configuration files hardcode the
  value for the {\tt PATH} environment variable, regardless of what is
  added via {\tt profile.d/} startup scripts.  This effects various
  OSCAR installed components, which are installed into locations such
  as \file{/opt}.  As such, the OSCAR installer appends the global path,
  e.g., {\tt \$PATH} or {\tt \$\{PATH\}} depending on the shell, to the end
  of the path so OSCAR installed applications are in the search
  environment.  This potentially makes changes to the following files:

  \begin{itemize}
  \item \file{/root/.bashrc}
  \item \file{/root/.cshrc}
  \item \file{/root/.tcshrc}
  \end{itemize}

\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{IA64 and Other Bleeding Edge Systems Notes}
\label{subsec:ia64notes}

IA64 support was removed for the \oscarversion\ release of OSCAR due to
timing problems and the significant differences between current IA32
distributions and the freely available IA64 distributions.  IA64 suppor is
fully expected to return in the next release.

%TJN: Uncomment when ia64 support returns (and update things!) ;)
%
% \begin{itemize}
% 
% \item The OSCAR auto-install diskette will probably not work on Itanium
%   systems, but they mostly have support for network booting.
%   
% \item Some Itanium 1 or 2 systems are supported by OSCAR under
%   RedHat's Linux 7.2 release for Itanium.  Itanium systems that can
%   use the standard RedHat Itanium kernel for booting and network
%   access should work with OSCAR.
% 
% \item Itanium 2 machines often have newer hardware interfaces for
% 	things like networking or disk drives that sometimes require newer
% 	kernels than those provided by official Linux distributions. RedHat 7.2
% 	will work on some Itanium2 machines. Manufacturers will typically
% 	provide driver disks or driver downloads for their machine's newer
% 	hardware interfaces. The user will sometimes have to compile their own
% 	kernel.  This is essentially a ``do it yourself'' kind
%     of process, and not recommended for novices.  Please consult the
%     OSCAR user's mailing list for more information.
% 
% \item If an Itanium (or an IA32 based) system has new or unknown
%   hardware that is not supported by the stock kernel in the base
%   operating system release, it will not work with standard OSCAR,
%   since OSCAR uses the kernel RPMS supplied with the vendors release
%   to boot and load the compute nodes.  If you have a custom compiled
%   kernel/module set that works for your hardware, you should look at
%   the NCSA Kernel\_Picker utility at \url{http://oscar.ncsa.uiuc.edu/} to
%   enable you to use them in OSCAR.
% 
% \end{itemize}
% 

% LocalWords:  tex Exp TJN unmunge pathenv
